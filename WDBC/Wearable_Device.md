# Wearable Device에서 API를 받아와서 사용하는 방법을 정리함.

## 논점1. 갤럭시 워치만으로 API를 사용할 수 있느냐? vs 스마트폰에 어플까지 설치를 해야 API를 사용할 수 있느냐?

## 📱 스마트폰 사용 여부에 따른 기능 비교

| 기능 | 스마트폰 사용 시 | 스마트폰 없이 워치 단독 |
|------|------------------|-------------------------|
| 실시간 심박수 측정 | 가능 (Samsung Health 또는 Health Connect API) | 가능 (워치 앱에서 센서 직접 사용) |
| 수면 감지 및 분석 | 가능 (삼성 헬스 앱 연동 필요) | 기본적인 수면 기록은 가능하나 API 접근은 제한적 |
| 장기 데이터 저장/분석 | 가능 (삼성 헬스 앱에 기록됨) | 불가 (워치에 저장되나 외부 추출 어려움) |
| API를 통한 외부 활용 | 가능 (Health Connect API 등) | 불가 (단, 워치 앱에서 직접 서버 전송 구현 시 가능) |
| 외부 서버 전송 | 가능 (스마트폰 앱에서 처리) | 가능 (워치 앱에서 직접 HTTP 전송 구현 시) |
| 앱 설치 필요 여부 | 필요 (Samsung Health, Health Connect) | 필요 (워치 전용 자체 앱 개발 필요) |


- 갤럭시워치(Wear OS)에서 health connect 사용 시 : 기본적인 심박수나 수면 데이터를 가져올 수 있음

- 스마트폰(Android)에서 Samsung Health 어플 설치 시 : 그 외에 

    - 수면 단계 분석 (얕은 수면, 깊은 수면, 렘 수면 등), 심박수 변화 추이, 수면 중 코골이 감지, 수면 중 산소 포화도 측정  같은 내용들을 알 수 있음 -> 있으면 정확도가 높아지고 좋지만 추가적으로 어플을 깔아야하는 귀찮음이 있음 -> 워치에 있는 데이터만 가져와서 졸음 운전 판단에 사용하는 것이 가장 간단하고 합리적인 방법으로 예상됌.

*이제 갤럭시워치에서 health connect만 사용하여 API로 정보를 가져오는 방법을 찾아야함.*

---

## 논점2. 갤럭시 워치에서 API를 통해 정보를 가져오는 방법이 무엇이 있느냐?

https://demat.tistory.com/77
갤럭시워치 api 가져오는거 관련해서 정리된 블로그

여기 내용에서 참고하자면 

- 1. 삼성에서 공식 지원하는 SDK
-    - https://developer.samsung.com/codelab
     - 대신 이 codelab이라는 공간 안에서는 모의 라이브러리만 사용할 수 있고(모의데이터를 통한 코드 실행), 진짜로 데이터를 사용하려면 삼성이랑 파트너쉽을 맺어야함 -> 좀 어려운 부분이라 다른 방법을 찾아야할 것 같음.
 


  3. 

보통적으로

첫번째 방법 : 삼성 헬스 서비스 연동:
SDK 사용:
삼성에서 제공하는 SDK를 사용하여 갤럭시 워치 앱에서 심박수, 걸음 수, 수면 등 다양한 건강 데이터를 가져올 수 있습니다.
Health Services API:
Wear OS 기반 기기에서 건강 데이터를 접근하려면 Health Services API를 사용해야 합니다.
앱 개발:
삼성 헬스 서비스 연동을 통해 유용한 건강 앱을 개발할 수 있습니다.


2번째 방법 : Wear OS Data Layer API:
데이터 동기화:
Wear OS의 Data Layer API를 사용하면 스마트폰과 워치 간의 데이터 동기화를 효율적으로 처리할 수 있습니다.
메시지 전송:
이 API는 메시지 전송 기능도 제공하여 워치에서 스마트폰으로 데이터를 주고받을 수 있습니다.
백그라운드 서비스:
시스템은 WearableListenerService를 통해 Data Layer API를 관리하며, 데이터 전송이 필요한 경우 자동으로 서비스를 시작하고 종료합니다.


기타:
API KEY 관리:
API를 사용할 때는 API 키를 안전하게 관리해야 하며, 유출 시 문제가 발생할 수 있으므로 주의해야 합니다. 
Manifest 파일:
갤럭시 워치 앱의 manifest 파일에 필요한 권한을 추가해야 합니다. 
플러터 앱:
플러터 앱에서 건강 데이터를 가져오려면 AndroidManifest.xml 파일에 권한을 추가해야 합니다. 



https://developer.android.com/training/building-wearables.html
각종 API 소개 및 UI 구성하는 법이 소개된 사이트

Wear OS by Google에서는 사용자가 연결 상태를 유지하고, 건강/피트니스 목표를 추적하고, 작업을 실행하며, 자신을 표현하는 데 도움이 되는 앱을 작성할 수 있음.

https://demat.tistory.com/77
갤럭시워치 api 가져오는거 관련해서 정리된 블로그



---


# 갤럭시 워치 건강 데이터 수집 기능 정리


---

## ⌚ 워치 단독으로 센서 데이터를 가져오는 방법 요약

| 항목 | 방법 | API 예시 | 비고 |
|------|------|----------|------|
| 심박수 | `SensorManager`로 실시간 수집 | `Sensor.TYPE_HEART_RATE` | 정확하고 실시간 가능 |
| 수면 추적 | 공식 API 미제공. 시간 기반 수면 추정 필요 | 직접 수면 시간 계산 로직 구현 필요 | 정확한 수면 단계는 어려움 |
| 서버 전송 | HTTP 라이브러리 사용 (`HttpURLConnection`, `OkHttp` 등) | `POST` 요청 구현 | 워치에 Wi-Fi/LTE 연결 필수 |
| BLE 송신 | GATT Server 구현 후 광고 | Android BLE API | 수신 측 장치 구현 필요 |
| 데이터 저장 | 내부 저장소 또는 `SharedPreferences` 사용 | `openFileOutput()` 등 | 임시 저장용도 (장기 저장 어려움) |

---

## 📌 참고 요약

- 워치 단독으로도 **심박수 측정 및 서버 전송**은 가능
- 수면 데이터는 **기초적인 시간 기록 수준까지만** 가능
- Health Connect 연동을 통해 스마트폰에서 **공식 API로 정밀 데이터 활용** 가능
- **워치 앱 개발 시 Wear OS SDK + Android Studio** 필요



개발을 원한다면 Android Studio에서 Wear OS용 앱을 따로 개발해야 합니다.
